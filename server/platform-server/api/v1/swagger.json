{"consumes":["application/json"],"definitions":{"protobufAny":{"additionalProperties":{},"properties":{"@type":{"type":"string"}},"type":"object"},"rpcStatus":{"properties":{"code":{"format":"int32","type":"integer"},"details":{"items":{"$ref":"#/definitions/protobufAny"},"type":"array"},"message":{"type":"string"}},"type":"object"},"v1Dataset":{"properties":{"addr":{"title":"数据集子目录","type":"string"},"name":{"title":"数据集名称，必填","type":"string"},"path":{"title":"数据集容器内路径","type":"string"},"storageConfigName":{"title":"存储配置名称，必填","type":"string"}},"type":"object"},"v1Image":{"properties":{"name":{"type":"string"},"version":{"type":"string"}},"type":"object"},"v1Node":{"properties":{"allocated":{"additionalProperties":{"type":"string"},"type":"object"},"capacity":{"additionalProperties":{"type":"string"},"type":"object"},"ip":{"type":"string"},"nodeName":{"type":"string"},"status":{"type":"string"}},"type":"object"},"v1Output":{"properties":{"addr":{"title":"存储子目录","type":"string"},"path":{"title":"容器内输出路径","type":"string"},"storageConfigName":{"title":"存储配置名称，必填","type":"string"}},"type":"object"},"v1Parameter":{"properties":{"key":{"title":"命令参数key，非必填","type":"string"},"value":{"title":"命令参数value，非必填","type":"string"}},"type":"object"},"v1PlatformResourcesReply":{"properties":{"resources":{"items":{"$ref":"#/definitions/v1Node"},"type":"array"}},"type":"object"},"v1Resource":{"properties":{"name":{"title":"命令参数key，必填","type":"string"},"size":{"title":"命令参数value，必填","type":"string"}},"type":"object"},"v1StopJobReply":{"properties":{"stoppedAt":{"title":"停止时间","type":"number"}},"type":"object"},"v1Task":{"properties":{"command":{"title":"子任务执行命令","type":"string"},"isMainRole":{"title":"是否主任务，非必填","type":"boolean"},"minFailedTaskCount":{"title":"子任务最小失败数，非必填","type":"number"},"minSucceededTaskCount":{"title":"子任务最小成功数，非必填","type":"number"},"name":{"title":"子任务名称，非必填，校验规则\"^[0-9a-zA-Z_]*$\"，最大长度30个字符","type":"string"},"parameters":{"items":{"$ref":"#/definitions/v1Parameter"},"title":"command执行命令参数,key-value，数组","type":"array"},"resources":{"items":{"$ref":"#/definitions/v1Resource"},"title":"资源","type":"array"},"taskNumber":{"title":"副本个数，非必填","type":"number"}},"type":"object"},"v1TokenReply":{"properties":{"access_token":{"title":"token","type":"string"},"expire_in":{"title":"有效时间(秒)","type":"number"},"token_type":{"title":"token类型","type":"string"}}},"v1TrainJob":{"properties":{"completedAt":{"title":"job完成时间","type":"number"},"createdAt":{"title":"创建时间","type":"number"},"datasets":{"items":{"$ref":"#/definitions/v1Dataset"},"title":"数据集","type":"array"},"desc":{"title":"job描述","type":"string"},"id":{"title":"任务ID","type":"string"},"image":{"$ref":"#/definitions/v1Image","title":"镜像"},"name":{"title":"job名称","type":"string"},"runSec":{"title":"运行时","type":"number"},"startedAt":{"title":"启动时间","type":"number"},"status":{"title":"任务状态","type":"string"},"tasks":{"items":{"$ref":"#/definitions/v1Task"},"title":"子任务配置信息","type":"array"},"updatedAt":{"title":"更新时间","type":"number"}},"type":"object"},"v1TrainJobInfoReply":{"properties":{"trainJob":{"$ref":"#/definitions/v1TrainJob","title":"训练任务"}},"type":"object"},"v1TrainJobListReply":{"properties":{"totalSize":{"title":"查询结果总数","type":"number"},"trainJobs":{"items":{"$ref":"#/definitions/v1TrainJob"},"title":"任务","type":"array"}},"type":"object"},"v1TrainJobReply":{"properties":{"jobId":{"title":"训练任务ID，必填","type":"string"}},"type":"object"},"v1TrainJobRequest":{"properties":{"datasets":{"items":{"$ref":"#/definitions/v1Dataset"},"title":"数据集信息","type":"array"},"desc":{"title":"训练任务描述，非必填","type":"string"},"image":{"$ref":"#/definitions/v1Image","title":"镜像信息"},"name":{"title":"训练任务名称，必填，长度1-30","type":"string"},"output":{"$ref":"#/definitions/v1Output","title":"输出路径信息"},"tasks":{"items":{"$ref":"#/definitions/v1Task"},"title":"子任务信息","type":"array"}},"type":"object"},"v1TrainJobStasticsReply":{"properties":{"failedSize":{"title":"失败数量","type":"number"},"runningSize":{"title":"正在运行数量","type":"number"},"stoppedSize":{"title":"停止数量","type":"number"},"succeededSize":{"title":"成功数量","type":"number"},"totalSize":{"title":"任务数量","type":"number"},"waitingSize":{"title":"等待数量","type":"number"}},"type":"object"}},"info":{"description":"鉴权采用Bearer Token，oauth2相关接口按照[标准](https://tools.ietf.org/html/rfc6749#section-5.2)实现，其他接口按照以下格式：\n\n成功格式：\n\n```json\n{\n    \"success\": true,\n    \"payload\": {},\n    \"error\": null\n}\n```\n\n失败格式：\n\n```json\n{\n    \"success\": false,\n    \"payload\": null,\n    \"error\": {\n        \"code\": 0,\n        \"subcode\": 0,\n        \"message\": \"\"\n    }\n}\n```\n","title":"octopus api","version":""},"paths":{"/v1/oauth/token":{"post":{"operationId":"Oauth_Token","parameters":[{"description":"授权方式，client_credentials等","format":"string","in":"query","name":"grant_type","required":true,"type":"string"},{"description":"客户端id","format":"string","in":"query","name":"client_id","required":true,"type":"string"},{"description":"客户端secret","format":"string","in":"query","name":"client_secret","required":true,"type":"string"}],"responses":{"200":{"description":"A successful response.","schema":{"$ref":"#/definitions/v1TokenReply"}}},"summary":"获取token","tags":["Oauth"]}},"/v1/overall/trainjobStastics":{"get":{"operationId":"TrainJobService_TrainJobStastics","parameters":[{"description":"大于某个时间创建，非必填.","in":"query","name":"createdAtGte","required":false,"type":"number"},{"description":"小于某个时间创建，非必填.","in":"query","name":"createdAtLt","required":false,"type":"number"}],"responses":{"200":{"description":"A successful response.","schema":{"$ref":"#/definitions/v1TrainJobStasticsReply"}}},"summary":"获取训练任务统计信息","tags":["TrainJobService"]}},"/v1/platform/resource":{"get":{"operationId":"TrainJobService_PlatformResources","responses":{"200":{"description":"A successful response.","schema":{"$ref":"#/definitions/v1PlatformResourcesReply"}}},"summary":"获取集群资源信息","tags":["TrainJobService"]}},"/v1/platform/trainjob":{"get":{"operationId":"TrainJobService_TrainJobList","parameters":[{"description":"页码，从1开始，必填.","in":"query","name":"pageIndex","required":false,"type":"number"},{"description":"页大小，最小1条，最大100条，必填.","in":"query","name":"pageSize","required":false,"type":"number"},{"description":"分组依据，非必填.","in":"query","name":"sortBy","required":false,"type":"string"},{"description":"升序、降序，非必填.","in":"query","name":"orderBy","required":false,"type":"string"},{"description":"大于某个时间创建，非必填.","in":"query","name":"createdAtGte","required":false,"type":"number"},{"description":"小于某个时间创建，非必填.","in":"query","name":"createdAtLt","required":false,"type":"number"},{"description":"状态查询，非必填.","in":"query","name":"status","required":false,"type":"string"},{"description":"模糊查找字段，可用于name等模糊查找，非必填.","in":"query","name":"searchKey","required":false,"type":"string"}],"responses":{"200":{"description":"A successful response.","schema":{"$ref":"#/definitions/v1TrainJobListReply"}}},"summary":"获取训练任务列表","tags":["TrainJobService"]},"post":{"operationId":"TrainJobService_TrainJob","parameters":[{"in":"body","name":"body","required":true,"schema":{"$ref":"#/definitions/v1TrainJobRequest"}}],"responses":{"200":{"description":"A successful response.","schema":{"$ref":"#/definitions/v1TrainJobReply"}}},"summary":"创建训练任务","tags":["TrainJobService"]}},"/v1/platform/trainjob/{id}":{"get":{"operationId":"TrainJobService_GetJobInfo","parameters":[{"description":"任务ID","in":"path","name":"id","required":true,"type":"string"}],"responses":{"200":{"description":"A successful response.","schema":{"$ref":"#/definitions/v1TrainJobInfoReply"}}},"summary":"获取训练任务详情","tags":["TrainJobService"]}},"/v1/platform/trainjob/{id}/stop":{"post":{"operationId":"TrainJobService_StopJob","parameters":[{"description":"任务ID","in":"path","name":"id","required":true,"type":"string"},{"in":"body","name":"body","required":true,"schema":{"type":"object"}}],"responses":{"200":{"description":"A successful response.","schema":{"$ref":"#/definitions/v1StopJobReply"}}},"summary":"停止训练任务","tags":["TrainJobService"]}}},"produces":["application/json"],"swagger":"2.0","tags":[{"name":"TrainJobService"}]}